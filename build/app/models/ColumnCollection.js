define(["jquery","underscore","backbone","./ColumnModel"],function(e,t,n,u){var r=n.Collection.extend({model:u,initialize:function(e,t){this.options=t||{}},initializeModels:function(e){t.each(this.models,function(n){if(n.get("queryColumn")||console.log(n.get("queryColumn")),"quantitative"===n.get("type")||"date"===n.get("type")||"discrete"===n.get("type")){if("auto"===n.getValues()){var u=e.getValuesForColumn(n);n.set("values",{range:{min:u[0],max:u[u.length-1]}})}else if(void 0!==n.getValues().range&&("auto"===n.getValues().range.min[0]||"auto"===n.getValues().range.max[0])){var u=e.getValuesForColumn(n);"auto"===n.getValues().range.min[0]&&(n.getValues().range.min[0]=u[0]),"auto"===n.getValues().range.max[0]&&(n.getValues().range.max[0]=u[u.length-1])}}else if("categorical"===n.get("type")||"ordinal"===n.get("type")){if("auto"===n.getValues()){var u=e.getValuesForColumn(n);n.set("values",{values:u,labels:t.clone(u),hints:[],colors:1===n.get("colorable")?t.map(u,function(){return"#969696"}):[]})}if(1===n.get("blanks")){var u=n.get("values");u.values.push("null"),u.labels.push("Unspecified"),void 0!==u.colors&&u.colors.push("#969696")}}},this)},byType:function(e){var t=this.filter(function(t){return t.get("type")===e});return new r(t)},byGroup:function(e){var t=this.filter(function(t){return t.get("group")===e});return new r(t)},byAttribute:function(t,n){n=void 0!==n?n:1;var u=this.filter(function(u){return e.isArray(n)?n.indexOf(u.get(t))>-1:u.get(t)===n});return new r(u)},byQueryColumn:function(e){return this.filter(function(t){return t.getQueryColumnByType("value")===e||t.getQueryColumnByType("min")===e||t.getQueryColumnByType("max")===e})[0]}});return r});